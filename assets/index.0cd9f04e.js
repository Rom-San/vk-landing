import{v as b,r as y,o as l,c as r,a as i,b as h,t as u,n as m,w as p,d as g,F as v,e as I,f as x,g as f,h as P}from"./vendor.4e32a6d1.js";const w=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}};w();var E="/vk-landing/assets/phone.9fe2144b.svg",C="/vk-landing/assets/mail.f6f1960d.svg",L="/vk-landing/assets/vk.f43731ab.svg";function _(s){if(!!s){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://vk.com/js/api/openapi.js?169",e.onload=function(){VK.Retargeting.Init(s),VK.Retargeting.Hit()},document.head.appendChild(e)}}var O=(s,e)=>{const a=s.__vccOpts||s;for(const[c,t]of e)a[c]=t;return a};const V={directives:{mask:b.exports.mask},async created(){var a;const s=window.location.href;console.log("\u{1F680} ~ search",s);const e=this.getQuery(s);if(!e)this.loader=!1;else{const c=e.ml;this.hash=e.hash;try{const t=await fetch(`${this.api}/mini-landing/${c}`);this.ml=await t.json(),this.loader=!1,document.title=this.ml.content.title,this.setDescription(),((a=this.ml)==null?void 0:a.additionalOptions.VkPixel)&&_(this.ml.additionalOptions.VkPixel),_()}catch(t){this.ml=null,this.loader=!1,console.log(t.message)}}},data(){return{ml:null,hash:null,loader:!0,description:"",api:"https://prosto.bz/api",vkUrl:"https://vk.com/",youtubeUrl:"https://www.youtube.com/embed",isInvalidPhone:!0,isInvalidEmail:!0,phone:null,phoneNumberLength:null,email:null,emailAttributes:!1,vkLink:"",agreement:!0}},computed:{getImage(){return this.ml.content?`${this.api}/file/${this.ml.content.image[0]}`:""},getVideo(){let s;const e=this.ml.content.video;return e.includes("https://youtube.com")?s=e.replace("watch?v=","embed/"):s=e.replace("https://youtu.be",this.youtubeUrl),s+"?controls=0&modestbranding=1&showinfo=0&rel=0"},getTitle(){var s;return((s=this.ml)==null?void 0:s.content)?this.ml.content.title:""},getText(){var s;return((s=this.ml)==null?void 0:s.content)?this.ml.content.text:""},getPhoneIcon(){return E},getEmailIcon(){return C},getButtons(){var s,e;return((e=(s=this.ml)==null?void 0:s.buttons)==null?void 0:e.length)?this.ml.buttons:[]},isButtonDisabled(){return this.isInvalidPhone&&this.ml.additionalOptions.showPhone||this.isInvalidEmail&&this.ml.additionalOptions.showEmail||!this.agreement}},methods:{onButton(){this.isButtonDisabled||(window.top.location.href=this.vkLink)},getQuery(s){let e={};return s.includes("#")?s.split("#")[1].split("&").forEach(t=>{const n=t.split("=");Object.assign(e,{[n[0]]:n[1]})}):(this.loader=!1,e=null),e},setDescription(){const s=this.ml.content.text.indexOf(".");this.description=this.ml.content.text.slice(0,s+1);const e=document.createElement("meta");e.setAttribute("name","description"),e.content=this.description,document.head.appendChild(e)},onChangePhone(){this.phoneNumberLength<11&&(this.isInvalidPhone=!0)},onChangeEmail(){this.emailAttributes?this.isInvalidEmail=!1:this.isInvalidEmail=!0},onClickPhone(){this.phone||(this.phone="+7")},onInputPhone(){const s=this.phone.replace(/[^\d]/g,"");this.phoneNumberLength=s.length,this.isInvalidPhone=this.phoneNumberLength<11,this.getInfo()},onInputEmail(){const s=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;this.emailAttributes=s.test(this.email),this.isInvalidEmail=!this.emailAttributes,this.getInfo()},async postData(){const s={id:this.ml.buttons[0].commandId,fields:{email:this.email,phone:this.phone}};try{return(await fetch(`${this.api}/info`,{method:"POST",body:JSON.stringify(s)})).text()}catch(e){console.log(e.message)}},getInfo(){(!this.isInvalidPhone||!this.isInvalidEmail)&&this.postData().then(s=>{typeof s=="string"&&(this.vkLink=`${this.vkUrl}im?sel=-${this.ml.buttons[0].botIdInSocialNetwork}&start=${this.hash}`)})},getLogo(s){let e;switch(s){case"Vkontakte":e=L;break}return e},getButtonText(s){let e;switch(s){case"Vkontakte":e="\u0412\u043A\u043E\u043D\u0442\u0430\u043A\u0442\u0435";break}return e}}},B={key:0,class:"wrapper"},A={class:"minilanding"},N={class:"headline"},D=["src"],T=["src"],z={class:"container"},U={class:"title"},j={class:"content"},S={class:"text"},K={class:"form"},M=i("div",{class:"label"},"\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043F\u043E\u043B\u044F \u0434\u043B\u044F \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F",-1),F=["src"],Z=["src"],Q={class:"footer"},R=i("div",{class:"label"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u0435\u0441\u0441\u0435\u043D\u0434\u0436\u0435\u0440",-1),q={class:"buttons"},H=["src"],J={class:"text"},G=f(" \u0412\u044B \u0441\u043E\u0433\u043B\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044C \u0441\xA0 "),W=i("a",{href:"https://prostolp.com/policy.pdf",target:"_blank"}," \u0423\u0441\u043B\u043E\u0432\u0438\u044F\u043C\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F \u0438 \u041F\u043E\u043B\u0438\u0442\u0438\u043A\u043E\u0439 \u043A\u043E\u043D\u0444\u0438\u0434\u0435\u043D\u0446\u0438\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u0438",-1),X=i("div",{class:"made-in"},[f(" \u0421\u0434\u0435\u043B\u0430\u043D\u043E \u043D\u0430 \u043F\u043B\u0430\u0442\u0444\u043E\u0440\u043C\u0435 "),i("a",{href:"http://prosto.bz",target:"_blank"},"prosto.bz")],-1),Y={key:1,id:"preloader"},$=i("div",{id:"loader"},null,-1),ee=[$],te={key:2,class:"empty"},se=i("div",{class:"text"},"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445",-1),ne=[se];function ie(s,e,a,c,t,n){const d=y("mask");return l(),r(v,null,[!t.loader&&t.ml?(l(),r("div",B,[i("div",A,[i("div",N,[t.ml.content.image?(l(),r("img",{key:0,class:"image",src:n.getImage,alt:""},null,8,D)):h("",!0),t.ml.content.video?(l(),r("iframe",{key:1,class:"video",width:"585",src:n.getVideo,frameborder:"0",allowfullscreen:""},null,8,T)):h("",!0)]),i("div",z,[i("div",U,u(n.getTitle),1),i("div",j,[i("div",S,u(n.getText),1),i("form",K,[M,t.ml&&t.ml.additionalOptions.showPhone?(l(),r("div",{key:0,class:m(["input-block",{invalid:t.isInvalidPhone}])},[i("img",{class:"icon",src:n.getPhoneIcon,alt:""},null,8,F),p(i("input",{type:"tel","onUpdate:modelValue":e[0]||(e[0]=o=>t.phone=o),onClick:e[1]||(e[1]=(...o)=>n.onClickPhone&&n.onClickPhone(...o)),onInput:e[2]||(e[2]=(...o)=>n.onInputPhone&&n.onInputPhone(...o)),onChange:e[3]||(e[3]=(...o)=>n.onChangePhone&&n.onChangePhone(...o)),placeholder:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430"},null,544),[[d,"+7(###) ###-##-##"],[g,t.phone]])],2)):h("",!0),t.ml&&t.ml.additionalOptions.showEmail?(l(),r("div",{key:1,class:m(["input-block",{invalid:t.isInvalidEmail}])},[i("img",{class:"icon",src:n.getEmailIcon,alt:""},null,8,Z),p(i("input",{type:"email","onUpdate:modelValue":e[4]||(e[4]=o=>t.email=o),onInput:e[5]||(e[5]=(...o)=>n.onInputEmail&&n.onInputEmail(...o)),onChange:e[6]||(e[6]=(...o)=>n.onChangeEmail&&n.onChangeEmail(...o)),placeholder:"\u0412\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u0435\u043C\u0435\u0439\u043B"},null,544),[[g,t.email]])],2)):h("",!0)])])]),i("div",Q,[R,i("div",q,[(l(!0),r(v,null,I(n.getButtons,o=>(l(),r("div",{class:m(["button",{disabled:n.isButtonDisabled}]),key:o.name},[i("div",{class:m(["link",{"not-allowed":n.isButtonDisabled}]),onClick:e[7]||(e[7]=(...k)=>n.onButton&&n.onButton(...k))},[i("img",{class:"logo",src:n.getLogo(o.name),alt:""},null,8,H),i("div",J,u(n.getButtonText(o.name)),1)],2)],2))),128))]),i("div",{class:m(["agreement",{"not-agreement":!t.agreement}])},[p(i("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>t.agreement=o)},null,512),[[x,t.agreement]]),G,W],2),X])])])):h("",!0),t.loader?(l(),r("div",Y,ee)):h("",!0),!t.loader&&!t.ml?(l(),r("div",te,ne)):h("",!0)],64)}var oe=O(V,[["render",ie]]);P(oe).mount("#app");
